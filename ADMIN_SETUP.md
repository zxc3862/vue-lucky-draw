# 🔐 設定第一個管理員 - 詳細步驟

## 步驟 1：註冊管理員帳號
1. 前往您的網站：`http://localhost:5173/#/admin/login`
2. 點擊「沒有帳號？點此註冊」
3. 輸入管理員 Email 和密碼進行註冊
4. 檢查信箱完成 Email 驗證（如果需要）

## 步驟 2：設定管理員權限
前往 Supabase Dashboard：

### 方法 A：使用便利函數（推薦）
1. 進入 **SQL Editor**
2. 執行 `admin-setup.sql` 中的函數
3. 然後執行：
```sql
SELECT set_admin_by_email('您的管理員Email@example.com');
```

### 方法 B：手動設定
1. 進入 **Authentication > Users**
2. 找到您剛註冊的用戶，複製 User ID (UUID)
3. 進入 **SQL Editor**，執行：
```sql
INSERT INTO user_roles (user_id, email, role) 
VALUES ('複製的UUID', '您的管理員Email', 'admin');
```

## 步驟 3：驗證設定
1. 重新登入網站
2. 您應該可以看到「管理後台」按鈕
3. 可以進入 `/#/admin/dashboard` 管理系統

## 🎯 完整的角色系統

### 管理員 (admin)
- ✅ 將註冊用戶加入抽球（預設 0 球）
- ✅ 管理玩家球數（新增、減少）
- ✅ 執行抽球
- ✅ 設定用戶權限
- ✅ 系統重置
- ✅ 參與抽球（可選）

### 參加者 (participant)  
- ✅ 參與/暫停抽球
- ✅ 修改自己的顯示名稱
- ✅ 查看排行榜和歷史

### 訪客 (未登入)
- ✅ 查看排行榜
- ✅ 查看抽球歷史
- ❌ 無法參與或管理

## 🔧 重要變更

### 🎱 玩家球數
- **新玩家預設 0 球**（不是 1 球）
- 管理員可以手動分配初始球數

### 👥 玩家管理
- **不能建立虛擬玩家**
- **只能從已註冊用戶中選擇**
- 用戶必須先註冊帳號才能參與抽球
- 玩家名稱自動使用 Email 前綴

## 🔧 測試建議

1. **註冊測試帳號**：
   - 管理員：`admin@test.com`
   - 參加者：`user1@test.com`, `user2@test.com`

2. **測試流程**：
   - 管理員登入 → 將用戶加入抽球
   - 參加者登入 → 確認可以看到自己的抽球狀態
   - 管理員分配球數 → 執行抽球
   - 檢查歷史記錄

3. **安全測試**：
   - 參加者嘗試進入管理後台（應該被拒絕）
   - 未登入用戶嘗試參與（應該要求登入）

現在您有了完整的用戶綁定抽球系統！🎉
