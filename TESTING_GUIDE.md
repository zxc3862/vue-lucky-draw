# 🧪 Vue Lucky Draw 手動測試指南

## 📋 測試環境信息
- **開發服務器**: http://localhost:5173/
- **Supabase URL**: https://qzffahnlwvxgfovmrjia.supabase.co
- **測試日期**: 2025年7月8日

## 🎯 主要測試功能

### 1. 首頁 (Home)
**URL**: http://localhost:5173/
**功能**:
- ✅ 顯示系統統計 (參與玩家、總球數、抽球次數)
- ✅ 用戶認證狀態顯示
- ✅ 管理員/參加者角色判斷
- ✅ 登入/登出功能

### 2. 登入註冊頁面 (AdminLogin)
**URL**: http://localhost:5173/#/admin/login
**功能**:
- ✅ 用戶登入 (Email + 密碼)
- ✅ 用戶註冊 (Email + 密碼 + 顯示名稱)
- ✅ 忘記密碼功能
- ✅ 登入成功後自動跳轉首頁

### 3. 管理員後台 (AdminDashboard)
**URL**: http://localhost:5173/#/admin/dashboard
**功能**:
- ✅ 玩家管理 (新增、編輯、刪除)
- ✅ 抽球控制 (執行抽球、重置系統)
- ✅ 用戶角色管理
- ✅ 系統狀態監控
- ✅ 數據同步功能

### 4. Email 驗證頁面 (EmailVerify)
**URL**: http://localhost:5173/#/verify-email
**功能**:
- ✅ 自動顯示驗證成功
- ✅ 3秒後自動跳轉登入頁

## 🔑 測試帳號建議

### 建議測試流程：

#### 步驟 1: 註冊新帳號
1. 前往 http://localhost:5173/#/admin/login
2. 點擊「沒有帳號？點此註冊」
3. 填寫測試資料：
   - **Email**: test@example.com (或任意有效格式)
   - **密碼**: test123456
   - **顯示名稱**: 測試用戶
4. 點擊「🚀 註冊帳號」

#### 步驟 2: 登入測試
1. 註冊成功後會自動切換到登入模式
2. 使用剛才註冊的帳號登入
3. 確認登入成功後自動跳轉到首頁

#### 步驟 3: 首頁功能測試
1. 確認用戶信息正確顯示
2. 檢查角色顯示 (應該是「參加者」)
3. 測試參與抽球功能
4. 查看統計數據

#### 步驟 4: 管理員後台測試
1. 直接訪問 http://localhost:5173/#/admin/dashboard
2. 如果沒有管理員權限，會顯示權限不足
3. 測試各項管理功能

## 🛠️ 調試工具

### 瀏覽器開發者工具
1. 按 F12 打開開發者工具
2. 查看 Console 標籤頁的日誌輸出
3. 關注以下關鍵日誌：
   - 登入流程日誌
   - 用戶角色創建日誌
   - 路由跳轉日誌

### 測試輔助頁面
- **快速登入測試**: file:///d:/vue-lucky-draw/test-login.html
- **註冊功能測試**: file:///d:/vue-lucky-draw/test-register.html

## 🔍 重點測試項目

### ✅ 用戶註冊流程
- [ ] Email 格式驗證
- [ ] 密碼長度驗證 (最少6位)
- [ ] 密碼確認匹配
- [ ] 顯示名稱必填
- [ ] 註冊成功提示
- [ ] 自動創建 user_roles 記錄

### ✅ 用戶登入流程
- [ ] Email 密碼驗證
- [ ] 開發環境允許未驗證 Email
- [ ] 登入成功提示
- [ ] 自動跳轉首頁
- [ ] 用戶狀態正確更新

### ✅ 權限管理
- [ ] 新用戶預設為 participant 角色
- [ ] 管理員後台權限檢查
- [ ] 角色顯示正確

### ✅ 數據同步
- [ ] 管理員能看到所有用戶
- [ ] 強制同步功能正常
- [ ] 用戶角色記錄完整

## 🚨 常見問題排除

### 問題 1: 登入後沒有跳轉
**可能原因**: 路由問題或認證狀態未更新
**解決方法**: 檢查控制台日誌，手動刷新頁面

### 問題 2: 管理員看不到用戶
**可能原因**: user_roles 記錄未創建
**解決方法**: 在管理員後台點擊「強制同步所有認證用戶」

### 問題 3: 權限不足
**可能原因**: 用戶角色未設定或為 participant
**解決方法**: 需要在資料庫中手動設定管理員角色

## 📊 測試檢查清單

### 基本功能
- [ ] 首頁載入正常
- [ ] 登入頁面顯示正常
- [ ] 註冊功能正常
- [ ] 登入功能正常
- [ ] 登出功能正常

### 進階功能
- [ ] 角色權限正確
- [ ] 管理員後台訪問
- [ ] 用戶管理功能
- [ ] 數據同步功能
- [ ] 錯誤處理正確

### 用戶體驗
- [ ] 頁面響應速度快
- [ ] 錯誤提示清楚
- [ ] 成功提示明確
- [ ] 頁面跳轉順暢

## 🔗 快速測試連結

1. **首頁**: http://localhost:5173/
2. **登入/註冊**: http://localhost:5173/#/admin/login
3. **管理員後台**: http://localhost:5173/#/admin/dashboard
4. **Email 驗證**: http://localhost:5173/#/verify-email

開始測試時，建議按照上述步驟順序進行，並在每個步驟記錄測試結果。如有任何問題，請查看瀏覽器控制台的錯誤信息。
