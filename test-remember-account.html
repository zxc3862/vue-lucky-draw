<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¬è©¦è¨˜ä½å¸³è™ŸåŠŸèƒ½</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #4299e1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #3182ce;
        }
        .result {
            background: #e6fffa;
            border: 1px solid #38b2ac;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        input[type="email"] {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª æ¸¬è©¦è¨˜ä½å¸³è™ŸåŠŸèƒ½</h1>
    
    <div class="test-section">
        <h3>æ¨¡æ“¬è¨˜ä½å¸³è™Ÿæ“ä½œ</h3>
        <label>
            <input type="checkbox" id="rememberCheckbox"> è¨˜ä½å¸³è™Ÿ
        </label>
        <br><br>
        <label>
            Email: <input type="email" id="emailInput" placeholder="è«‹è¼¸å…¥ Email">
        </label>
        <br><br>
        <button class="test-button" onclick="saveAccount()">å„²å­˜è¨­å®š</button>
        <button class="test-button" onclick="loadAccount()">è¼‰å…¥è¨­å®š</button>
        <button class="test-button" onclick="clearAccount()">æ¸…é™¤è¨­å®š</button>
        <div id="saveResult" class="result" style="display:none;"></div>
    </div>

    <div class="test-section">
        <h3>æ¸¬è©¦çµæœ</h3>
        <button class="test-button" onclick="checkLocalStorage()">æª¢æŸ¥ LocalStorage</button>
        <div id="storageResult" class="result" style="display:none;"></div>
    </div>

    <script>
        const REMEMBER_ACCOUNT_KEY = 'vue-lucky-draw-remember-account';
        const SAVED_EMAIL_KEY = 'vue-lucky-draw-saved-email';

        function saveAccount() {
            const rememberCheckbox = document.getElementById('rememberCheckbox');
            const emailInput = document.getElementById('emailInput');
            const resultDiv = document.getElementById('saveResult');

            try {
                if (rememberCheckbox.checked && emailInput.value) {
                    localStorage.setItem(REMEMBER_ACCOUNT_KEY, 'true');
                    localStorage.setItem(SAVED_EMAIL_KEY, emailInput.value);
                    resultDiv.innerHTML = `âœ… å·²å„²å­˜å¸³è™Ÿ: ${emailInput.value}`;
                    resultDiv.style.background = '#c6f6d5';
                } else {
                    localStorage.removeItem(REMEMBER_ACCOUNT_KEY);
                    localStorage.removeItem(SAVED_EMAIL_KEY);
                    resultDiv.innerHTML = 'ğŸ—‘ï¸ å·²æ¸…é™¤è¨˜ä½çš„å¸³è™Ÿè¨­å®š';
                    resultDiv.style.background = '#fed7d7';
                }
                resultDiv.style.display = 'block';
            } catch (error) {
                resultDiv.innerHTML = `âŒ éŒ¯èª¤: ${error.message}`;
                resultDiv.style.background = '#fed7d7';
                resultDiv.style.display = 'block';
            }
        }

        function loadAccount() {
            const rememberCheckbox = document.getElementById('rememberCheckbox');
            const emailInput = document.getElementById('emailInput');
            const resultDiv = document.getElementById('saveResult');

            try {
                const savedRemember = localStorage.getItem(REMEMBER_ACCOUNT_KEY);
                const savedEmail = localStorage.getItem(SAVED_EMAIL_KEY);

                if (savedRemember === 'true' && savedEmail) {
                    rememberCheckbox.checked = true;
                    emailInput.value = savedEmail;
                    resultDiv.innerHTML = `ğŸ“§ å·²è¼‰å…¥è¨˜ä½çš„å¸³è™Ÿ: ${savedEmail}`;
                    resultDiv.style.background = '#c6f6d5';
                } else {
                    rememberCheckbox.checked = false;
                    emailInput.value = '';
                    resultDiv.innerHTML = 'ğŸ“­ æ²’æœ‰æ‰¾åˆ°è¨˜ä½çš„å¸³è™Ÿ';
                    resultDiv.style.background = '#f7fafc';
                }
                resultDiv.style.display = 'block';
            } catch (error) {
                resultDiv.innerHTML = `âŒ éŒ¯èª¤: ${error.message}`;
                resultDiv.style.background = '#fed7d7';
                resultDiv.style.display = 'block';
            }
        }

        function clearAccount() {
            localStorage.removeItem(REMEMBER_ACCOUNT_KEY);
            localStorage.removeItem(SAVED_EMAIL_KEY);
            document.getElementById('rememberCheckbox').checked = false;
            document.getElementById('emailInput').value = '';
            const resultDiv = document.getElementById('saveResult');
            resultDiv.innerHTML = 'ğŸ§¹ å·²æ¸…é™¤æ‰€æœ‰è¨­å®š';
            resultDiv.style.background = '#f7fafc';
            resultDiv.style.display = 'block';
        }

        function checkLocalStorage() {
            const resultDiv = document.getElementById('storageResult');
            const rememberValue = localStorage.getItem(REMEMBER_ACCOUNT_KEY);
            const emailValue = localStorage.getItem(SAVED_EMAIL_KEY);

            const html = `
                <h4>LocalStorage å…§å®¹:</h4>
                <p><strong>è¨˜ä½å¸³è™Ÿ:</strong> ${rememberValue || '(æœªè¨­å®š)'}</p>
                <p><strong>å„²å­˜çš„ Email:</strong> ${emailValue || '(æœªè¨­å®š)'}</p>
                <p><strong>æ‰€æœ‰ç›¸é—œé …ç›®:</strong></p>
                <pre>${JSON.stringify({
                    [REMEMBER_ACCOUNT_KEY]: rememberValue,
                    [SAVED_EMAIL_KEY]: emailValue
                }, null, 2)}</pre>
            `;
            resultDiv.innerHTML = html;
            resultDiv.style.display = 'block';
        }

        // é é¢è¼‰å…¥æ™‚è‡ªå‹•è¼‰å…¥è¨­å®š
        window.onload = function() {
            loadAccount();
        };

        // ç›£è½ checkbox è®Šæ›´
        document.getElementById('rememberCheckbox').addEventListener('change', function() {
            if (!this.checked) {
                clearAccount();
            }
        });

        // ç›£è½ email è®Šæ›´
        document.getElementById('emailInput').addEventListener('input', function() {
            const rememberCheckbox = document.getElementById('rememberCheckbox');
            if (rememberCheckbox.checked) {
                setTimeout(saveAccount, 300); // å»¶é²å„²å­˜ï¼Œé¿å…éåº¦è§¸ç™¼
            }
        });
    </script>
</body>
</html>
